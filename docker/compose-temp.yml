# add docker network here to connect to db form shiny wiht localhost and no lag
version: "3.3"
services:
  postgis:
    image: postgis/postgis
    ports:
      - 5432:5432
    environment:
     - POSTGRES_USER=dbuser
     - POSTGRES_PASSWORD=dbpass
     - POSTGRES_DB=postgres
    volumes:
     - /var/lib/postgresql/data:/var/lib/postgresql/data
  shiny:
    image: shinyimage
    ports:
     - 80:3838
    volumes:
     - /srv/shiny-server:/srv/shiny-server
     - /var/log/shiny-server:/var/log/shiny-server
     - /home/ubuntu/R/library:/usr/local/lib/R/site-library
  rstudio:
    image: rocker/rstudio:latest
    port:
      - 9595:8787
    environment:
      - PASSWORD=rstudiopass
    volumes:
      - /home/ubuntu/R/library:/usr/local/lib/R/site-library
